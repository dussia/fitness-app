<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>üéß –û–Ω–ª–∞–π–Ω-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="container py-4">
  <h1 class="mb-4">üìö –û–Ω–ª–∞–π–Ω-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∞—É–¥–∏–æ–∫–Ω–∏–≥</h1>
  
  <form id="searchForm" class="mb-4">
    <input type="text" id="query" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–ª–∏ –∞–≤—Ç–æ—Ä–∞" class="form-control" required>
  </form>
  
  <div id="results"></div>

  <script>
    const API_URL = "https://my-audio-api.onrender.com/search"; // —Ç–≤–æ–π backend API

    document.getElementById("searchForm").addEventListener("submit", async function(e) {
      e.preventDefault();
      let q = document.getElementById("query").value;
      let res = await fetch(`${API_URL}?q=${encodeURIComponent(q)}`);
      let books = await res.json();

      let out = "";
      if (books.length > 0) {
        books.forEach(b => {
          out += `
            <div class="card mb-3">
              <div class="card-body">
                <h5>${b.author} ‚Äî ${b.title} <span class="badge bg-secondary">${b.genre}</span></h5>
                <audio controls preload="none" class="w-100 mt-2">
                  <source src="${b.url}" type="audio/mpeg">
                </audio>
              </div>
            </div>`;
        });
      } else {
        out = "<p>–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ üòî</p>";
      }
      document.getElementById("results").innerHTML = out;
    });
  </script>
</body>
</html>